@{
    ViewData["Title"] = "Dashboard";
}

@section Styles {
    <link rel="stylesheet" href="~/css/dashboard.css" />

    <style>
        /* Highcharts Styling */
        .chart-row {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: space-between;
        }

        .chart-full-row {
            width: 100%;
            margin-bottom: 1rem;
        }


        .highcharts-description {
            margin-top: 1rem;
            color: #426B1F;
            font-weight: bold;
            text-align: center;
        }
    </style>
}
<div class="dashboard-container">   
    <div class="d-flex justify-content-between align-items-center">
        <h1>Dashboard</h1>
        <div class="date-picker">
            <label for="start-date">From:</label>
            <input type="date" id="start-date" name="start-date" class="date-input">

            <label for="end-date">To:</label>
            <input type="date" id="end-date" name="end-date" class="date-input">
            <button class="generate-report-btn">Generate Report</button>
        </div>
    </div>
    <hr class="expenses-divider">

    <div class="summary-cards">
        <div class="card">
            <div>
                <span class="card-title">TOTAL EXPENSES</span>
                <div class="card-value">$100,000</div>
            </div>
        </div>
        <div class="card">
            <div>
                <span class="card-title">TOTAL TRANSACTIONS</span>
                <div class="card-value">100,000</div>
            </div>
        </div>
    </div>

    <div class="table-container">
        <table class="table">
            <thead>
                <tr>
                    <th>Subject</th>
                    <th>Category</th>
                    <th>Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>New Vomero 5</td>
                    <td><span class="badge-category">Impulsive Purchase</span></td>
                    <td>$5,800.00</td>
                </tr>
            </tbody>
            <div class="export-buttons">
                <button class="export-btn csv-btn">Print as CSV</button>
                <button class="export-btn pdf-btn">Print as PDF</button>
            </div>
        </table>
    </div>


    <div class="chart-section">

        <div class="chart-row">
            <div class="chart-half-row">
                <figure class="highcharts-figure">
                    <div id="container"></div>
                </figure>
            </div>
            <div class="chart-half-row">
                <figure class="highcharts-figure">
                   <div id="first-container"></div>
                </figure>
            </div>
        </div>
    </div>
</div>


@section Scripts {
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // First Chart
            Highcharts.chart('first-container', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Expenses by Category',
                    align: 'left',
                    style: {
                        color: '#426B1F',
                        fontWeight: 'bold'
                    }
                },
                xAxis: {
                    categories: ['Office Supplies', 'Travel', 'Entertainment', 'Food', 'Utilities'],
                    crosshair: true,
                    accessibility: {
                        description: 'Expense Categories'
                    },
                    labels: {
                        style: {
                            color: '#426B1F'
                        }
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Amount (in USD)',
                        style: {
                            color: '#426B1F'
                        }
                    },
                    labels: {
                        style: {
                            color: '#426B1F'
                        }
                    }
                },
                tooltip: {
                    valuePrefix: '$',
                    backgroundColor: '#426B1F',
                    style: {
                        color: '#FAFAF5'
                    }
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0
                    }
                },
                colors: ['#426B1F', '#88B04B', '#E5EEDE', '#BFD7B5', '#88B04B'],
                series: [{
                    name: 'Amount',
                    data: [500, 1200, 800, 600, 900]
                }]
            });

            // Second Chart
            Highcharts.chart('container', {
                colors: ['#01BAF2', '#71BF45', '#FAA74B', '#B37CD2'],
                chart: {
                    type: 'pie'
                },
                accessibility: {
                    point: {
                        valueSuffix: '%'
                    }
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.0f}%</b>'
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true,
                            format: '{point.name}: {y} %'
                        },
                        showInLegend: true
                    }
                },
                series: [{
                    name: 'Energy Types',
                    colorByPoint: true,
                    innerSize: '75%',
                    data: [{
                        name: 'EV',
                        y: 68.1
                    }, {
                        name: 'Hybrids',
                        y: 11.0
                    }, {
                        name: 'Diesel',
                        y: 11.2
                    }, {
                        name: 'Petrol',
                        y: 9.7
                    }]
                }]
            });

            // Third Chart
            Highcharts.chart('third-container', {
                chart: {
                    type: 'pie'
                },
                tooltip: {
                    valueSuffix: '%'
                },
                plotOptions: {
                    series: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: [{
                            enabled: true,
                            distance: 20
                        }, {
                            enabled: true,
                            distance: -40,
                            format: '{point.percentage:.1f}%',
                            style: {
                                fontSize: '1.2em',
                                textOutline: 'none',
                                opacity: 0.7
                            },
                            filter: {
                                operator: '>',
                                property: 'percentage',
                                value: 10
                            }
                        }]
                    }
                },
                series: [{
                    name: 'Composition',
                    colorByPoint: true,
                    data: [{
                        name: 'Water',
                        y: 55.02
                    }, {
                        name: 'Fat',
                        sliced: true,
                        selected: true,
                        y: 26.71
                    }, {
                        name: 'Carbohydrates',
                        y: 1.09
                    }, {
                        name: 'Protein',
                        y: 15.5
                    }, {
                        name: 'Ash',
                        y: 1.68
                    }]
                }]
            });
        });
    </script>
}
